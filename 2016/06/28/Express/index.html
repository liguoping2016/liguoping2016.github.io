<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Express | 前端小博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ExpressExpress 应用生成器通过应用生成器工具 express 可以快速创建一个应用的骨架。通过如下命令安装：
$ npm install express-generator -g
-h 选项可以列出所有可用的命令行选项：
$ express -h

      Usage: express [options] [dir]

          Options:">
<meta property="og:type" content="article">
<meta property="og:title" content="Express">
<meta property="og:url" content="http://yoursite.com/2016/06/28/Express/index.html">
<meta property="og:site_name" content="前端小博客">
<meta property="og:description" content="ExpressExpress 应用生成器通过应用生成器工具 express 可以快速创建一个应用的骨架。通过如下命令安装：
$ npm install express-generator -g
-h 选项可以列出所有可用的命令行选项：
$ express -h

      Usage: express [options] [dir]

          Options:">
<meta property="og:updated_time" content="2016-11-19T06:58:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Express">
<meta name="twitter:description" content="ExpressExpress 应用生成器通过应用生成器工具 express 可以快速创建一个应用的骨架。通过如下命令安装：
$ npm install express-generator -g
-h 选项可以列出所有可用的命令行选项：
$ express -h

      Usage: express [options] [dir]

          Options:">
  
    <link rel="alternative" href="/atom.xml" title="前端小博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css">
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://img5.imgtn.bdimg.com/it/u=1999300046,1517656119&amp;fm=21&amp;gp=0.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">lgp</a></h1>
		</hgroup>

		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="#" title="rss">rss</a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">lgp</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://img5.imgtn.bdimg.com/it/u=1999300046,1517656119&amp;fm=21&amp;gp=0.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">lgp</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-Express" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Express
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><h2 id="Express-应用生成器"><a href="#Express-应用生成器" class="headerlink" title="Express 应用生成器"></a>Express 应用生成器</h2><p>通过应用生成器工具 express 可以快速创建一个应用的骨架。<br>通过如下命令安装：</p>
<pre><code>$ npm install express-generator -g
</code></pre><p>-h 选项可以列出所有可用的命令行选项：</p>
<pre><code>$ express -h

      Usage: express [options] [dir]

          Options:

           -h, --help          output usage information
        -V, --version       output the version number
            -e, --ejs           add ejs engine support (defaults to jade)
        --hbs           add handlebars engine support
        -H, --hogan         add hogan.js engine support
        -c, --css &lt;engine&gt;  add stylesheet &lt;engine&gt; support (less|stylus|compass|sass) (defaults to plain css)
        --git           add .gitignore
        -f, --force         force on non-empty directory
</code></pre><p>例如，下面的示例就是在当前工作目录下创建一个命名为 myapp 的应用。<br>    个命名为 myapp 的应用。</p>
<pre><code>$ express myapp

       create : myapp
       create : myapp/package.json
       create : myapp/app.js
       create : myapp/public
       create : myapp/public/javascripts
       create : myapp/public/images
       create : myapp/routes
       create : myapp/routes/index.js
       create : myapp/routes/users.js
       create : myapp/public/stylesheets
       create : myapp/public/stylesheets/style.css
       create : myapp/views
       create : myapp/views/index.jade
       create : myapp/views/layout.jade
       create : myapp/views/error.jade
       create : myapp/bin
       create : myapp/bin/www
</code></pre><p>然后安装所有依赖包：</p>
<pre><code>$ cd myapp 
$ npm install
</code></pre><p>启动这个应用（MacOS 或 Linux 平台）：</p>
<pre><code>$ DEBUG=myapp npm start
</code></pre><p>Windows 平台使用如下命令：</p>
<pre><code>&gt; set DEBUG=myapp &amp; npm start
</code></pre><p>然后在浏览器中打开 <a href="http://localhost:3000/" target="_blank" rel="external">http://localhost:3000/</a> 网址就可以看到这个应用了。i</p>
<p>通过 Express 应用生成器创建的应用一般都有如下目录结构：</p>
<pre><code>.
├── app.js
├── bin
│   └── www
├── package.json
├── public
│   ├── images
│   ├── javascripts
│   └── stylesheets
│       └── style.css
├── routes
│   ├── index.js
│   └── users.js
└── views
        ├── error.jade
    ├── index.jade
    └── layout.jade

7 directories, 9 files
</code></pre><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由是指如何定义应用的端点（URIs）以及如何响应客户端的请求。</p>
<p>路由是由一个 URI、HTTP 请求（GET、POST等）和若干个句柄组成，它的结构如下： app.METHOD(path, [callback…], callback)， app 是 express 对象的一个实例， METHOD 是一个 HTTP 请求方法， path 是服务器上的路径， callback 是当路由匹配时要执行的函数。</p>
<p>下面是一个基本的路由示例：</p>
<pre><code>var express = require(&apos;express&apos;);
var app = express();

// respond with &quot;hello world&quot; when a GET request is made to the homepage
app.get(&apos;/&apos;, function(req, res) {
      res.send(&apos;hello world&apos;);
});
</code></pre><h3 id="路由方法"><a href="#路由方法" class="headerlink" title="路由方法"></a>路由方法</h3><p>路由方法源于 HTTP 请求方法，和 express 实例相关联。</p>
<p>下面这个例子展示了为应用跟路径定义的 GET 和 POST 请求：</p>
<pre><code>// GET method route
app.get(&apos;/&apos;, function (req, res) {
      res.send(&apos;GET request to the homepage&apos;);
});

// POST method route
    app.post(&apos;/&apos;, function (req, res) {
      res.send(&apos;POST request to the homepage&apos;);
});
</code></pre><p>Express 定义了如下和 HTTP 请求对应的路由方法： get, post, put, head, delete, options, trace, copy, lock, mkcol, move, purge, propfind, proppatch, unlock, report, mkactivity, checkout, merge, m-search, notify, subscribe, unsubscribe, patch, search, 和 connect。</p>
<p><code>有些路由方法名不是合规的 JavaScript 变量名，此时使用括号记法，比如： app[&#39;m-search&#39;](&#39;/&#39;, function ...</code></p>
<p>app.all() 是一个特殊的路由方法，没有任何 HTTP 方法与其对应，它的作用是对于一个路径上的所有请求加载中间件。</p>
<p>在下面的例子中，来自 “/secret” 的请求，不管使用 GET、POST、PUT、DELETE 或其他任何 <a href="https://nodejs.org/api/http.html#http_http_methods" target="_blank" rel="external">http 模块</a>支持的 HTTP 请求，句柄都会得到执行。</p>
<pre><code>app.all(&apos;/secret&apos;, function (req, res, next) {
      console.log(&apos;Accessing the secret section ...&apos;);
      next(); // pass control to the next handler
});
</code></pre><h3 id="路由路径"><a href="#路由路径" class="headerlink" title="路由路径"></a>路由路径</h3><p>路由路径和请求方法一起定义了请求的端点，它可以是字符串、字符串模式或者正则表达式。</p>
<p><code>Express 使用 path-to-regexp 匹配路由路径，请参考文档查阅所有定义路由路径的方法。 Express Route Tester 是测试基本 Express 路径的好工具，但不支持模式匹配。</code><br><code>查询字符串不是路由路径的一部分。</code></p>
<p>使用字符串的路由路径示例：</p>
<pre><code>// 匹配根路径的请求
app.get(&apos;/&apos;, function (req, res) {
      res.send(&apos;root&apos;);
});

// 匹配 /about 路径的请求
app.get(&apos;/about&apos;, function (req, res) {
      res.send(&apos;about&apos;);
});

// 匹配 /random.text 路径的请求
app.get(&apos;/random.text&apos;, function (req, res) {
      res.send(&apos;random.text&apos;);
});
</code></pre><p>使用字符串模式的路由路径示例：</p>
<pre><code>// 匹配 acd 和 abcd
    app.get(&apos;/ab?cd&apos;, function(req, res) {
      res.send(&apos;ab?cd&apos;);
});

// 匹配 abcd、abbcd、abbbcd等
app.get(&apos;/ab+cd&apos;, function(req, res) {
      res.send(&apos;ab+cd&apos;);
});

// 匹配 abcd、abxcd、abRABDOMcd、ab123cd等
app.get(&apos;/ab*cd&apos;, function(req, res) {
      res.send(&apos;ab*cd&apos;);
});

// 匹配 /abe 和 /abcde
app.get(&apos;/ab(cd)?e&apos;, function(req, res) {
     res.send(&apos;ab(cd)?e&apos;);
});
</code></pre><p><code>字符 ?、+、* 和 () 是正则表达式的子集，- 和 . 在基于字符串的路径中按照字面值解释。</code></p>
<p>使用正则表达式的路由路径示例：</p>
<pre><code>// 匹配任何路径中含有 a 的路径：
app.get(/a/, function(req, res) {
      res.send(&apos;/a/&apos;);
});

// 匹配 butterfly、dragonfly，不匹配 butterflyman、    dragonfly man等
app.get(/.*fly$/, function(req, res) {
      res.send(&apos;/.*fly$/&apos;);
});
</code></pre><h3 id="路由句柄"><a href="#路由句柄" class="headerlink" title="路由句柄"></a>路由句柄</h3><p>可以为请求处理提供多个回调函数，其行为类似 中间件。唯一的区别是这些回调函数有可能调用 next(‘route’) 方法而略过其他路由回调函数。可以利用该机制为路由定义前提条件，如果在现有路径上继续执行没有意义，则可将控制权交给剩下的路径。</p>
<p>路由句柄有多种形式，可以是一个函数、一个函数数组，或者是两者混合，如下所示.</p>
<p>使用一个回调函数处理路由：</p>
<pre><code>app.get(&apos;/example/a&apos;, function (req, res) {
      res.send(&apos;Hello from A!&apos;);
});
</code></pre><p>使用多个回调函数处理路由（记得指定 next 对象）：</p>
<pre><code>app.get(&apos;/example/b&apos;, function (req, res, next) {
      console.log(&apos;response will be sent by the next function ...&apos;);
  next();
}, function (req, res) {
      res.send(&apos;Hello from B!&apos;);
});
</code></pre><p>使用回调函数数组处理路由：</p>
<pre><code>var cb0 = function (req, res, next) {
      console.log(&apos;CB0&apos;);
      next();
}

var cb1 = function (req, res, next) {
      console.log(&apos;CB1&apos;);
      next();
}

var cb2 = function (req, res) {
      res.send(&apos;Hello from C!&apos;);
}

app.get(&apos;/example/c&apos;, [cb0, cb1, cb2]);
</code></pre><p>混合使用函数和函数数组处理路由：</p>
<pre><code>var cb0 = function (req, res, next) {
     console.log(&apos;CB0&apos;);
      next();
}

var cb1 = function (req, res, next) {
      console.log(&apos;CB1&apos;);
      next();
}

app.get(&apos;/example/d&apos;, [cb0, cb1], function (req, res,     next) {
     console.log(&apos;response will be sent by the next function ...&apos;);
  next();
}, function (req, res) {
      res.send(&apos;Hello from D!&apos;);
});
</code></pre><h3 id="响应方法"><a href="#响应方法" class="headerlink" title="响应方法"></a>响应方法</h3><p>下表中响应对象（res）的方法向客户端返回响应，终结请求响应的循环。如果在路由句柄中一个方法也不调用，来自客户端的请求会一直挂起。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>res.download()</td>
<td>提示下载文件。</td>
</tr>
<tr>
<td>res.end()</td>
<td>终结响应处理流程。</td>
</tr>
<tr>
<td>res.json()</td>
<td>发送一个 JSON 格式的响应。</td>
</tr>
<tr>
<td>res.jsonp()</td>
<td>发送一个支持 JSONP 的 JSON 格式的响应。</td>
</tr>
<tr>
<td>res.redirect()</td>
<td>重定向请求。</td>
</tr>
<tr>
<td>res.render()</td>
<td>渲染视图模板。</td>
</tr>
<tr>
<td>res.send()</td>
<td>发送各种类型的响应。</td>
</tr>
<tr>
<td>res.sendFile</td>
<td>以八位字节流的形式发送文件。</td>
</tr>
<tr>
<td>res.sendStatus()</td>
<td>设置响应状态代码，并将其以字符串形式作为响应体的一部分发送。</td>
</tr>
</tbody>
</table>
<h4 id="app-route"><a href="#app-route" class="headerlink" title="app.route()"></a>app.route()</h4><p>可使用 app.route() 创建路由路径的链式路由句柄。由于路径在一个地方指定，这样做有助于创建模块化的路由，而且减少了代码冗余和拼写错误。请参考 Router() 文档 了解更多有关路由的信息。</p>
<p>下面这个示例程序使用 app.route() 定义了链式路由句柄。</p>
<pre><code>app.route(&apos;/book&apos;)
      .get(function(req, res) {
    res.send(&apos;Get a random book&apos;);
  })
  .post(function(req, res) {
    res.send(&apos;Add a book&apos;);
  })
  .put(function(req, res) {
    res.send(&apos;Update the book&apos;);
  });
</code></pre><h4 id="express-Router"><a href="#express-Router" class="headerlink" title="express.Router"></a>express.Router</h4><p>可使用 express.Router 类创建模块化、可挂载的路由句柄。Router 实例是一个完整的中间件和路由系统，因此常称其为一个 “mini-app”。</p>
<p>下面的实例程序创建了一个路由模块，并加载了一个中间件，定义了一些路由，并且将它们挂载至应用的路径上。</p>
<p>在 app 目录下创建名为 birds.js 的文件，内容如下：</p>
<pre><code>var express = require(&apos;express&apos;);
var router = express.Router();

// 该路由使用的中间件
router.use(function timeLog(req, res, next) {
      console.log(&apos;Time: &apos;, Date.now());
  next();
});
// 定义网站主页的路由
router.get(&apos;/&apos;, function(req, res) {
      res.send(&apos;Birds home page&apos;);
});
// 定义 about 页面的路由
router.get(&apos;/about&apos;, function(req, res) {
      res.send(&apos;About birds&apos;);
});

module.exports = router;
</code></pre><p>然后在应用中加载路由模块：</p>
<pre><code>var birds = require(&apos;./birds&apos;);
...
app.use(&apos;/birds&apos;, birds);
</code></pre><p>应用即可处理发自 /birds 和 /birds/about 的请求，并且调用为该路由指定的 timeLog 中间件。</p>
<h2 id="在-Express-中使用模板引擎"><a href="#在-Express-中使用模板引擎" class="headerlink" title="在 Express 中使用模板引擎"></a>在 Express 中使用模板引擎</h2><p>需要在应用中进行如下设置才能让 Express 渲染模板文件：</p>
<ul>
<li>views, 放模板文件的目录，比如： app.set(‘views’, ‘./views’)</li>
<li>view engine, 模板引擎，比如： app.set(‘view engine’, ‘jade’)</li>
</ul>
<p>然后安装相应的模板引擎 npm 软件包。</p>
<pre><code>$ npm install jade --save
</code></pre><p><code>和 Express 兼容的模板引擎，比如 Jade，通过 res.render() 调用其导出方法 __express(filePath, options, callback) 渲染模板。
有一些模板引擎不遵循这种约定，Consolidate.js 能将 Node 中所有流行的模板引擎映射为这种约定，这样就可以和 Express 无缝衔接。</code></p>
<p>一旦 view engine 设置成功，就不需要显式指定引擎，或者在应用中加载模板引擎模块，Express 已经在内部加载，如下所示。</p>
<pre><code>app.set(&apos;view engine&apos;, &apos;jade&apos;);
</code></pre><p>在 views 目录下生成名为 index.jade 的 Jade 模板文件，内容如下：</p>
<pre><code>html
      head
        title!= title
      body
        h1!= message
</code></pre><p>然后创建一个路由渲染 index.jade 文件。如果没有设置 view engine，您需要指明视图文件的后缀，否则就会遗漏它。</p>
<pre><code>app.get(&apos;/&apos;, function (req, res) {
      res.render(&apos;index&apos;, { title: &apos;Hey&apos;, message: &apos;Hello there!&apos;});
});
</code></pre><p>此时向主页发送请求，“index.jade” 会被渲染为 HTML。</p>
<h2 id="集成数据库"><a href="#集成数据库" class="headerlink" title="集成数据库"></a>集成数据库</h2><p>为 Express 应用添加连接数据库的能力，只需要加载相应数据库的 Node.js 驱动即可。这里将会简要介绍如何为 Express 应用添加和使用一些常用的数据库 Node 模块。</p>
<ul>
<li>Cassandra</li>
<li>CouchDB</li>
<li>LevelDB</li>
<li>MySQL</li>
<li>MongoDB</li>
<li>Neo4j</li>
<li>PostgreSQL</li>
<li>Redis</li>
<li>SQLite</li>
<li>ElasticSearch</li>
</ul>
<p><code>这些数据库驱动只是其中一部分，可在 npm 官网 查找更多驱动。</code></p>
<h3 id="Cassandra"><a href="#Cassandra" class="headerlink" title="Cassandra"></a>Cassandra</h3><h5 id="模块-cassandra-driver"><a href="#模块-cassandra-driver" class="headerlink" title="模块: cassandra-driver"></a>模块:<a href="https://github.com/datastax/nodejs-driver" target="_blank" rel="external"> cassandra-driver</a></h5><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install cassandra-driver
</code></pre><h6 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h6><pre><code>var cassandra = require(&apos;cassandra-driver&apos;);
var client = new cassandra.Client({ contactPoints: [&apos;localhost&apos;]});

client.execute(&apos;select key from system.local&apos;, function(err, result) {
      if (err) throw err;
      console.log(result.rows[0]);
});
</code></pre><h3 id="CouchDB"><a href="#CouchDB" class="headerlink" title="CouchDB"></a>CouchDB</h3><h5 id="模块-nano"><a href="#模块-nano" class="headerlink" title="模块: nano"></a>模块: <a href="https://github.com/dscape/nano" target="_blank" rel="external">nano</a></h5><h5 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install nano
</code></pre><h6 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h6><pre><code>var nano = require(&apos;nano&apos;)(&apos;http://localhost:5984&apos;);
nano.db.create(&apos;books&apos;);
var books = nano.db.use(&apos;books&apos;);

//Insert a book document in the books database
books.insert({name: &apos;The Art of war&apos;}, null, function(err, body) {
      if (!err){
        console.log(body);
      }
});

//Get a list of all books
books.list(function(err, body){
      console.log(body.rows);
}
</code></pre><h3 id="LevelDB"><a href="#LevelDB" class="headerlink" title="LevelDB"></a>LevelDB</h3><h5 id="模块-levelup"><a href="#模块-levelup" class="headerlink" title="模块: levelup"></a>模块: <a href="https://github.com/Level/levelup" target="_blank" rel="external">levelup</a></h5><h5 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install level levelup leveldown
</code></pre><p>######示例</p>
<pre><code>var levelup = require(&apos;levelup&apos;);
var db = levelup(&apos;./mydb&apos;);

db.put(&apos;name&apos;, &apos;LevelUP&apos;, function (err) {

      if (err) return console.log(&apos;Ooops!&apos;, err);
          db.get(&apos;name&apos;, function (err, value) {
    if (err) return console.log(&apos;Ooops!&apos;, err);
        console.log(&apos;name=&apos; + value)
      });

});
</code></pre><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><h5 id="模块-mysql"><a href="#模块-mysql" class="headerlink" title="模块: mysql"></a>模块: <a href="https://github.com/mysqljs/mysql" target="_blank" rel="external">mysql</a></h5><h5 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install mysql
</code></pre><h6 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h6><pre><code>var mysql      = require(&apos;mysql&apos;);
var connection = mysql.createConnection({
      host     : &apos;localhost&apos;,
      user     : &apos;dbuser&apos;,
      password : &apos;s3kreee7&apos;
});

connection.connect();

connection.query(&apos;SELECT 1 + 1 AS solution&apos;, function(err, rows, fields) {
      if (err) throw err;
          console.log(&apos;The solution is: &apos;, rows[0].solution);
    });

connection.end();
</code></pre><h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><h5 id="模块-mongoskin"><a href="#模块-mongoskin" class="headerlink" title="模块: mongoskin"></a>模块: <a href="https://github.com/kissjs/node-mongoskin" target="_blank" rel="external">mongoskin</a></h5><h5 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install mongoskin
</code></pre><h6 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h6><pre><code>var db = require(&apos;mongoskin&apos;).db(&apos;localhost:27017/animals&apos;);

db.collection(&apos;mamals&apos;).find().toArray(function(err, result) {
      if (err) throw err;
      console.log(result);
});
</code></pre><p>If you want a object model driver for MongoDB, checkout <a href="https://github.com/Automattic/mongoose" target="_blank" rel="external">Mongoose</a>.</p>
<h3 id="Neo4j"><a href="#Neo4j" class="headerlink" title="Neo4j"></a>Neo4j</h3><h5 id="模块-apoc"><a href="#模块-apoc" class="headerlink" title="模块: apoc"></a>模块: <a href="https://github.com/hacksparrow/apoc" target="_blank" rel="external">apoc</a></h5><h5 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install apoc
</code></pre><h6 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h6><pre><code>var apoc = require(&apos;apoc&apos;);

apoc.query(&apos;match (n) return n&apos;).exec().then(
      function (response) {
        console.log(response);
      },
      function (fail) {
            console.log(fail);
      }
);
</code></pre><h3 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h3><h5 id="模块-pg"><a href="#模块-pg" class="headerlink" title="模块: pg"></a>模块: <a href="https://github.com/brianc/node-postgres" target="_blank" rel="external">pg</a></h5><h5 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install pg
</code></pre><h6 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h6><pre><code>var pg = require(&apos;pg&apos;);
var conString = &quot;postgres://username:password@localhost/database&quot;;

pg.connect(conString, function(err, client, done) {

      if (err) {
        return console.error(&apos;error fetching client from pool&apos;, err);
      }
      client.query(&apos;SELECT $1::int AS number&apos;, [&apos;1&apos;], function(err, result) {
            done();
        if (err) {
             return console.error(&apos;error running query&apos;, err);
        }
        console.log(result.rows[0].number);
      });

});
</code></pre><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><h5 id="模块-redis"><a href="#模块-redis" class="headerlink" title="模块: redis"></a>模块: <a href="https://github.com/NodeRedis/node_redis" target="_blank" rel="external">redis</a></h5><h5 id="安装-7"><a href="#安装-7" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install redis
</code></pre><h6 id="示例-6"><a href="#示例-6" class="headerlink" title="示例"></a>示例</h6><pre><code>var client = require(&apos;redis&apos;).createClient();

client.on(&apos;error&apos;, function (err) {
      console.log(&apos;Error &apos; + err);
});

client.set(&apos;string key&apos;, &apos;string val&apos;, redis.print);
client.hset(&apos;hash key&apos;, &apos;hashtest 1&apos;, &apos;some value&apos;, redis.print);
client.hset([&apos;hash key&apos;, &apos;hashtest 2&apos;, &apos;some other value&apos;], redis.print);

client.hkeys(&apos;hash key&apos;, function (err, replies) {

     console.log(replies.length + &apos; replies:&apos;);
      replies.forEach(function (reply, i) {
        console.log(&apos;    &apos; + i + &apos;: &apos; + reply);
      });

      client.quit();

});
</code></pre><h3 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h3><h5 id="模块-sqlite3"><a href="#模块-sqlite3" class="headerlink" title="模块:sqlite3"></a>模块:<a href="https://github.com/mapbox/node-sqlite3" target="_blank" rel="external">sqlite3</a></h5><h5 id="安装-8"><a href="#安装-8" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install sqlite3
</code></pre><h6 id="示例-7"><a href="#示例-7" class="headerlink" title="示例"></a>示例</h6><pre><code>var sqlite3 = require(&apos;sqlite3&apos;).verbose();
var db = new sqlite3.Database(&apos;:memory:&apos;);

db.serialize(function() {

  db.run(&apos;CREATE TABLE lorem (info TEXT)&apos;);
  var stmt = db.prepare(&apos;INSERT INTO lorem VALUES (?)&apos;);

 for (var i = 0; i &lt; 10; i++) {
    stmt.run(&apos;Ipsum &apos; + i);
 }

  stmt.finalize();

  db.each(&apos;SELECT rowid AS id, info FROM lorem&apos;, function(err,     row) {
    console.log(row.id + &apos;: &apos; + row.info);
      });
});

db.close();
</code></pre><h3 id="ElasticSearch"><a href="#ElasticSearch" class="headerlink" title="ElasticSearch"></a>ElasticSearch</h3><h5 id="模块-elasticsearch"><a href="#模块-elasticsearch" class="headerlink" title="模块: elasticsearch"></a>模块: <a href="https://github.com/elastic/elasticsearch-js" target="_blank" rel="external">elasticsearch</a></h5><h5 id="安装-9"><a href="#安装-9" class="headerlink" title="安装"></a>安装</h5><pre><code>$ npm install elasticsearch
</code></pre><h6 id="示例-8"><a href="#示例-8" class="headerlink" title="示例"></a>示例</h6><pre><code>var elasticsearch = require(&apos;elasticsearch&apos;);
var client = elasticsearch.Client({
      host: &apos;localhost:9200&apos;  
});

client.search({
      index: &apos;books&apos;,
      type: &apos;book&apos;,
      body: {
        query: {
             multi_match: {
                query: &apos;express js&apos;,
                fields: [&apos;title&apos;, &apos;description&apos;]
              }
        }
      }
}).then(function(response) {
      var hits = response.hits.hits;
}, function(error) {
      console.trace(error.message);
});
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/06/28/Express/" class="archive-article-date">
  	<time datetime="2016-06-28T06:02:04.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-06-28</time>
</a>
      
      

      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2016/08/14/js-screen/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          js_screen
        
      </div>
    </a>
  
  
    <a href="/2016/06/12/React-native/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">React native</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Express" data-title="Express" data-url="http://yoursite.com/2016/06/28/Express/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>





      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 lgp
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接1</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接2</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接3</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接4</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接5</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接6</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>